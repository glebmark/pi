What is GitOps?	An operational model where the desired state of infrastructure and applications is declared in Git. A controller running in the cluster continuously reconciles the actual state to match Git.
What is Flux CD?	A set of Kubernetes controllers that implement GitOps — they watch Git repositories (and Helm/OCI registries) and automatically apply changes to the cluster.
What are the four core Flux controllers?	source-controller, kustomize-controller, helm-controller, notification-controller.
What does source-controller do in Flux?	It fetches artifacts from external sources (Git repos, Helm repos, OCI registries, S3 buckets) and makes them available to other controllers as versioned artifacts.
What does kustomize-controller do in Flux?	It reconciles Kustomization CRs — applying Kubernetes manifests from a source, optionally running Kustomize overlays, variable substitution, and health checks.
What does helm-controller do in Flux?	It reconciles HelmRelease CRs — installing, upgrading, and uninstalling Helm charts based on declarative specs. It depends on source-controller for chart artifacts.
What does notification-controller do in Flux?	It handles inbound webhooks (Receivers) and outbound notifications (Providers/Alerts) — e.g. triggering reconciliation on GitHub push, or sending Slack alerts on failures.
What is a GitRepository CR in Flux?	A source-controller resource that tells Flux to clone a Git repository at a given URL, branch/tag, and interval, producing a versioned tarball artifact.
What is a HelmRepository CR in Flux?	A source-controller resource pointing to a Helm chart repository (HTTP or OCI). It periodically fetches the repo index so helm-controller can pull specific chart versions.
What is a HelmRelease CR in Flux?	A helm-controller resource declaring a Helm chart to install/upgrade in a target namespace, with specific values, version constraints, and dependency ordering via `dependsOn`.
What is a Kustomization CR in Flux (kustomize.toolkit.fluxcd.io)?	A kustomize-controller resource that applies a directory of manifests from a source artifact, with optional Kustomize overlays, patches, health checks, and dependency ordering.
How does Flux's Kustomization CR differ from a kustomize.config.k8s.io Kustomization?	Flux's Kustomization (kustomize.toolkit.fluxcd.io/v1) is a controller CR that triggers reconciliation. The kustomize.config.k8s.io one is a local file (`kustomization.yaml`) that Kustomize reads to build manifests. Flux's controller uses the latter internally.
What does `flux bootstrap` do?	It installs Flux controllers in the cluster, creates a GitRepository and Kustomization pointing at your repo, commits Flux's own manifests to the repo, and sets up a deploy key for access.
Why is `flux bootstrap` idempotent?	Running it again updates Flux components if needed, re-applies configuration, but doesn't duplicate resources. It checks existing state before making changes.
What does `dependsOn` do in a HelmRelease or Kustomization?	It creates an ordering constraint — Flux won't reconcile the resource until all dependencies report as Ready. Used to ensure CRDs exist before CRs, or CNI before LoadBalancer, etc.
How does Flux adopt an existing Helm release?	When you create a HelmRelease CR with the same release name and target namespace as an existing Helm release, Flux takes ownership on the next reconciliation and runs `helm upgrade` to ensure state matches.
What is the `spec.interval` field in Flux resources?	It controls how often Flux checks for drift between the desired state (Git/Helm repo) and actual cluster state. E.g. `30m` means reconcile every 30 minutes even without new commits.
What is drift detection in Flux?	Flux periodically compares the desired manifests from Git with what's actually deployed. If someone manually edits a resource (kubectl edit), Flux reverts it on the next reconciliation cycle.
What does `prune: true` do in a Flux Kustomization?	It enables garbage collection — if you remove a manifest from Git, Flux will delete the corresponding resource from the cluster. Without it, removed manifests are orphaned.
Why might you set `prune: false` for CRDs?	Deleting CRDs cascades to all custom resources of that type. Setting `prune: false` prevents accidental mass deletion if CRD manifests are temporarily removed from Git.
What is the `--path` flag in `flux bootstrap`?	It specifies the directory within the repo that Flux watches. Only manifests under this path are reconciled. E.g., `--path=cluster` means Flux only looks at `cluster/`.
What is a Flux source artifact?	A versioned tarball produced by source-controller from a Git repo, Helm repo, or OCI registry. Other controllers consume these artifacts to get the manifests they need to apply.
How does Flux handle Helm chart versions?	In a HelmRelease, `spec.chart.spec.version` accepts semver constraints (e.g., `1.19.x`, `>=1.0.0 <2.0.0`, `*`). Source-controller resolves the latest matching version from the HelmRepository.
What happens when a Flux HelmRelease reconciliation fails?	Flux retries based on the interval. The HelmRelease status shows Ready=False with an error message. Flux doesn't roll back automatically by default — you need `spec.upgrade.remediation.remediateLastFailure: true` for that.
What is `spec.upgrade.remediation` in a HelmRelease?	It configures automatic rollback on failed upgrades. `retries` sets how many times to retry, and `remediateLastFailure: true` rolls back to the previous successful release on final failure.
What is the difference between `flux reconcile` and waiting for the interval?	`flux reconcile` triggers an immediate reconciliation. Otherwise, Flux waits for `spec.interval` to elapse. Useful after pushing a change when you don't want to wait 30 minutes.
What does `flux reconcile kustomization flux-system --with-source` do?	It forces an immediate Git fetch (source refresh) AND reconciliation of the root Kustomization. Without `--with-source`, it reconciles from the last-fetched artifact.
Does `flux reconcile kustomization flux-system --with-source` affect all manifests?	Yes — it cascades. The `flux-system` Kustomization applies everything under `cluster/`, which includes child Kustomization CRs (infra-sources, infra-controllers, infra-configs, apps). Those children reference the same GitRepository, so they detect the new artifact revision and reconcile too. It's a full top-down refresh.
How do you reconcile only a single Flux-managed component?	Target it directly: `flux reconcile helmrelease cilium -n kube-system` or `flux reconcile kustomization infra-configs`. This avoids triggering a full cascade from the root.
How does Flux know which Git commit it last applied?	Each Kustomization and GitRepository status contains a `revision` field showing the branch and SHA (e.g., `main@sha1:03af2485`). This lets you verify exactly which commit is deployed.
What is a Flux Receiver?	A notification-controller resource that listens for inbound webhooks (e.g., from GitHub) and triggers immediate reconciliation of specified resources, so you don't have to wait for the poll interval.
What is a Flux Provider and Alert?	A Provider defines an external service (Slack, Teams, GitHub, etc.). An Alert watches Flux resources and sends notifications to the Provider when events occur (e.g., reconciliation failures).
What command shows the full Flux resource tree?	`flux tree kustomization flux-system` — shows the hierarchical dependency tree of all Flux-managed resources.
What does `flux suspend` do?	It pauses reconciliation for a specific resource (HelmRelease, Kustomization, etc.). The resource stays deployed but Flux stops checking for drift or updates. Resume with `flux resume`.
When would you use `flux suspend`?	During debugging/manual intervention when you need to temporarily modify resources without Flux reverting your changes. Also useful during maintenance windows.
What is the difference between a HelmRepository of type `default` vs `oci`?	`default` points to a traditional Helm HTTP/HTTPS chart repository with an index.yaml. `oci` points to an OCI-compliant container registry (e.g., ghcr.io) that stores Helm charts as OCI artifacts.
What namespace do Flux source resources typically live in?	`flux-system`. HelmRepositories, GitRepositories, and OCIRepositories are usually created in flux-system, while HelmReleases live in the target namespace of the chart.
How does Flux handle secrets in Git?	Flux supports SOPS (Mozilla) and age encryption. You encrypt secrets before committing, and Flux's kustomize-controller decrypts them at apply time using a decryption key stored in the cluster.
What is a Flux OCIRepository?	A source-controller resource that pulls OCI artifacts (including Helm charts stored as OCI) from container registries like ghcr.io, Docker Hub, or ECR.
How does Flux's multi-tenancy model work?	You can scope Flux Kustomizations to specific namespaces using `spec.targetNamespace` and `spec.serviceAccountName`, restricting what each team can deploy. Combined with RBAC, this isolates tenants.
What is `spec.targetNamespace` in a Flux Kustomization?	It overrides the namespace for all resources in the Kustomization, regardless of what the manifests say. Useful for deploying the same manifests to different namespaces.
What is `spec.serviceAccountName` in a Flux Kustomization?	It impersonates a specific ServiceAccount when applying manifests, limiting what the Kustomization can create/modify based on that SA's RBAC permissions.
What is the typical Flux repo structure for infrastructure vs apps?	`infrastructure/` contains platform components (CNI, ingress, storage, cert-manager) with strict dependency ordering. `apps/` contains workloads that depend on infrastructure being ready. Top-level Kustomizations wire them with `dependsOn`.
What does `flux uninstall` do?	It removes all Flux controllers and CRDs from the cluster. It does NOT delete the resources Flux was managing — those stay in the cluster but are no longer reconciled.
What is the difference between Flux `Kustomization` health checks and `dependsOn`?	`dependsOn` blocks reconciliation until dependencies are Ready. Health checks (`spec.healthChecks`) make the Kustomization itself report as not-Ready until the listed resources are healthy — downstream dependents then wait.
How does Flux handle Helm hooks?	Flux's helm-controller supports standard Helm hooks (pre-install, post-upgrade, etc.). Hooks run during `helm upgrade`. Test hooks can be triggered with `spec.test.enable: true`.
What is `spec.postBuild` in a Flux Kustomization?	It enables variable substitution in manifests after Kustomize builds them. You can reference ConfigMaps/Secrets as variable sources, replacing `${VAR_NAME}` placeholders in YAML.
What is the difference between `flux bootstrap` and `flux install` + manual setup?	`flux bootstrap` is the recommended approach — it installs Flux AND sets up the Git connection, commits Flux manifests to the repo, creating a self-managing loop. `flux install` only deploys controllers without Git integration.
What does the `--personal` flag do in `flux bootstrap github`?	It tells Flux the repository belongs to a personal GitHub account (not an organization). This affects how the deploy key is configured.
What is a deploy key in the context of Flux?	An SSH key pair where the public key is added to the GitHub repo (read-only or read-write) and the private key is stored as a Kubernetes Secret in flux-system. Flux uses it to clone/push the repo.
What happens if you manually `kubectl apply` a resource that Flux manages?	Flux will detect the drift on the next reconciliation cycle and revert your changes to match what's declared in Git. This is the core GitOps guarantee.
How can you exclude a field from Flux drift detection?	Use `spec.patches` in the Kustomization to set the field, or annotate the resource with `kustomize.toolkit.fluxcd.io/fieldManager: merge` to change the field management strategy.
What is the reconciliation loop in Flux?	source-controller fetches → kustomize/helm-controller compares desired vs actual → applies diff → reports status. This loop runs at `spec.interval` or on webhook trigger.
How do you upgrade Flux itself?	Run `flux bootstrap` again with the same parameters. It upgrades the controllers to the version matching your CLI. The operation is non-disruptive — managed resources keep running.
What is `spec.force` in a Flux Kustomization?	When set to true, Flux uses server-side force-apply for all resources, which can resolve field ownership conflicts but may override changes made by other controllers.
What is `spec.chart.spec.reconcileStrategy` in a HelmRelease?	It controls when Flux considers a new chart version available. `ChartVersion` (default) tracks chart version changes. `Revision` tracks any change in the chart artifact, even same version.
